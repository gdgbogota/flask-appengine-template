{% extends "base.html" %}
{% block content %}
    <h3>Add a New Conference</h3>
    <form id="new-conference-form" class="well form-horizontal"
        action="{{ url_for('new_conference') }}" method="post" accept-charset="utf-8">
        <fieldset>
            {{ form.hidden_tag() }}
            <div class="control-group">
                <div class="control-label">{{ form.name.label }}: </div>
                <div class="controls">
                    {{ form.name|safe }}
                    {% if form.name.errors %}
                    <ul class="errors">
                        {% for error in form.name.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            <div class="control-group">
                <div class="control-label">{{ form.topic.label }}: </div>
                <div class="controls">
                    {{ form.topic|safe }}
                    {% if form.topic.errors %}
                    <ul class="errors">
                        {% for error in form.topic.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            <div class="control-group">
                <div class="control-label">{{ form.desc.label }}: </div>
                <div class="controls">
                    {{ form.desc|safe }}
                    {% if form.desc.errors %}
                    <ul class="errors">
                        {% for error in form.desc.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            <div class="control-group">
                <div class="control-label">{{ form.city.label }}: </div>
                <div class="controls">
                    {{ form.city|safe }}
                    {% if form.city.errors %}
                    <ul class="errors">
                        {% for error in form.city.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            <div class="control-group">
                <div class="control-label">{{ form.max_attendees.label }}: </div>
                <div class="controls">
                    {{ form.max_attendees|safe }}
                    {% if form.max_attendees.errors %}
                    <ul class="errors">
                        {% for error in form.max_attendees.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            <div class="control-group">
                <div class="control-label">{{ form.start_date.label }}: </div>
                <div class="controls">
                    {{ form.start_date|safe }}
                    {% if form.start_date.errors %}
                    <ul class="errors">
                        {% for error in form.start_date.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            <div class="control-group">
                <div class="control-label">{{ form.end_date.label }}: </div>
                <div class="controls">
                    {{ form.end_date|safe }}
                    {% if form.end_date.errors %}
                    <ul class="errors">
                        {% for error in form.end_date.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <input class="btn btn-primary" type="submit" value="Add Conference"/>
                    <button class="btn" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </fieldset>
    </form>
{% endblock content %}
{% block tail_script %}
    <script>
        var FormHelpers = {
            validate: function (form, evt) {
                // Form validation for modal dialog
                var conference_name = form.find('#name').val();
                if (!(conference_name)) {
                    evt.preventDefault();
                    Utils.renderFieldErrorTooltip('#name', 'Name is required', 'right');
                }
            },
            init: function () {
                var self = this;
                var conference_form = $('#new-conference-form');
                conference_form.on('submit', function (evt) {
                    self.validate(conference_form, evt)
                });
            }
        };
        $(document).ready(function() {
            FormHelpers.init();
        });
    </script>
{% endblock tail_script %}

